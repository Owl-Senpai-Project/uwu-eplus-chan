## e+ チケットページからHLS/DASH URL を取得する方法（視聴は不可）

チケットを所持していなくても、**HLS配信URLを特定するところまで**は可能です。
ただし、**動画の視聴はできません**。

---

## 概要

e+（イープラス）の配信ページでは、ストリーム情報をAPI経由で取得できます。
チケットが無くても以下の手順により **HLS（.m3u8）URL** を確認できます。

---

## 手順

### 1. チケット販売ページのURLを確認

例：

```
https://eplus.jp/sf/detail/3480210024-P0030401P021001
```

---

### 2. URLから Stream ID を生成

`/detail/` の後ろの文字列を使用します。

```
3480210024-P0030401P021001
```

この値から Stream ID を次の形式に変換します。

```
XXXXXX-XXXX-PXXX-XXXX-PXXX-XXX
->
XXXXXX-XXXX-XXX
```

例：

```
348021-0024-P003-0401-P021-001
->
348021-0401-001
```

---

### 3. Stream情報APIへアクセス

生成した Stream ID を使用して、以下のAPIへアクセスします。

```
https://live.eplus.jp/api/stream/{stream_id}/status
```

例：

```
https://live.eplus.jp/api/stream/348021-0401-001/status
```

---

### 4. JSONレスポンスから HLS URL を取得

APIのレスポンスJSON内の以下の項目に HLS URL が含まれています。

```
stream["channels"]
stream["channels_live"]
```

ここに `.m3u8` のURLが格納されています。

---

## 重要な制限事項

e+ の配信は **CloudFront署名付きURL** を使用しています。
そのため、HLS URL を取得できても **そのまま再生することはできません**。

視聴ページ経由で付与される以下のパラメータが必須です。

* `Key-Pair-Id`
* `Key-Signature`
* `Key-Policy`

これらが付与されていないURLでは、再生は拒否されます。
もし、あなたが署名を回避する方法を知っている場合、おめでとうございます。あなたはすべてのコンテンツのアクセス権を手に入れました。

---

## まとめ

| 項目              | 可否 |
| --------------- | -- |
| Stream ID の取得   | 可能 |
| HLS URL の取得     | 可能 |
| 動画の視聴           | 不可 |
| CloudFront署名の回避 | 不可 |

---

このドキュメントは、配信構造の技術的理解を目的としたものです。
